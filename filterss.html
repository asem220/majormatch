<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Фильтры | MajorMatch</title>
  <link rel="stylesheet" href="CSSS/styll.css" />
  <link rel="icon" type="image/png" href="img/favicon.png" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet" />
  <style>
    body, h1, h2, h3, h4, h5, h6, label, p, button {
      font-family: 'Jost', sans-serif !important;
      font-weight: 500 !important;
    }
  </style>
  <style>
    body {
      background-color: #2e2a3a;
      font-family: "Jost", sans-serif;
    }

    header {
      position: relative;
      background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), 
                  linear-gradient(90deg, #ffb6c1, #da70d6, #8a2be2, #4169e1);
      color: white;
      padding: 6rem 2rem 12rem;
      text-align: center;
      overflow: hidden;
    }

    header h1 {
      font-size: 3rem;
      position: relative;
      z-index: 2;
    }

    header p {
      position: relative;
      z-index: 2;
    }

    .nav-buttons {
      position: relative;
      z-index: 10;
    }

    .nav-buttons .btn {
      margin: 0.5rem;
    }

    .wave-svg {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: auto;
      z-index: 1;
      animation: waveMotion 4s ease-in-out infinite;
    }

    @keyframes waveMotion {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(10px); }
    }

    .wave-svg path {
      fill: white;
      fill-opacity: 0.1;
    }

    .container {
      position: relative;
      z-index: 2;
      margin-top: -5rem;
    }

    form#uniForm {
      background: rgba(255, 255, 255, 0.12);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
    }

    form#uniForm label,
    form#uniForm .form-label {
      color: #fff;
    }

    form#uniForm .form-control,
    form#uniForm .form-select,
    form#uniForm textarea {
      background-color: rgba(255, 255, 255, 0.15);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    form#uniForm .form-control::placeholder {
      color: #ddd;
    }

    #results {
      background: rgba(255, 255, 255, 0.1);
      padding: 1.5rem;
      border-radius: 12px;
      color: #fff;
      margin-top: 2rem;
      line-height: 1.6;
    }

    #aiReasoning {
      white-space: pre-line;
    }

    .uni-card {
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      color: #fff;
      backdrop-filter: blur(8px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease;
    }

    .uni-card:hover {
      transform: translateY(-5px);
    }
  </style>
</head>
<body>
  <header class="text-center position-relative">
    <h1># MajorMatch</h1>
    <p>Подбор университета по фильтрам</p>
    <a href="account.html" class="account-icon-btn">
  <i class="bi bi-person-circle"></i>
  <span>Кабинет</span>
</a>
    <div class="nav-buttons d-flex justify-content-center flex-wrap mt-4">
  <a href="registrationn.html" class="navbar-btn">
    <i class="bi bi-person-plus"></i>
    <span>Регистрация</span>
  </a>
  <a href="filterss.html" class="navbar-btn active">
    <i class="bi bi-funnel"></i>
    <span>Фильтры</span>
  </a>
  <a href="testt.html" class="navbar-btn">
    <i class="bi bi-info-circle"></i>
    <span>О нас</span>
  </a>
</div>
    <svg class="wave-svg" viewBox="0 0 1440 320">
      <path d="M0,160L80,176C160,192,320,224,480,234.7C640,245,800,235,960,208C1120,181,1280,139,1360,117.3L1440,96L1440,320L0,320Z"/>
      <path d="M0,256L60,229.3C120,203,240,149,360,138.7C480,128,600,160,720,154.7C840,149,960,107,1080,117.3C1200,128,1320,192,1380,224L1440,256L1440,320L0,320Z"/>
      <path d="M0,288L80,277.3C160,267,320,245,480,229.3C640,213,800,203,960,208C1120,213,1280,235,1360,245.3L1440,256L1440,320L0,320Z"/>
    </svg>
  </header>

  <div class="container py-5">
    <h2 class="text-light mb-4">Фильтры для подбора университета</h2>
    <form id="uniForm" class="p-4 rounded shadow">
      <div class="mb-3">
        <label for="educationLevel" class="form-label">Уровень образования</label>
        <select class="form-select" id="educationLevel">
          <option>Бакалавриат</option>
          <option>Магистратура</option>
          <option>PhD</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="gpa" class="form-label">GPA</label>
        <input type="text" class="form-control" id="gpa" placeholder="Например: 4.8 из 5.0" />
      </div>
      <div class="mb-3">
        <label for="languageTest" class="form-label">Языковой тест</label>
        <input type="text" class="form-control" id="languageTest" placeholder="TOEFL: 105, IELTS: 7.5" />
      </div>
      <div class="mb-3">
        <label for="aptitudeTest" class="form-label">SAT / ACT</label>
        <input type="text" class="form-control" id="aptitudeTest" placeholder="SAT: 1450 (Math: 750, Verbal: 700)" />
      </div>
      <div class="mb-3">
        <label for="major" class="form-label">Направление</label>
        <input type="text" class="form-control" id="major" placeholder="Computer Science, Economics..." />
      </div>
      <div class="mb-3">
        <label for="region" class="form-label">Регионы</label>
        <input type="text" class="form-control" id="region" placeholder="США, Европа и т.д." />
      </div>
      <div class="mb-3">
        <label for="fundingOption" class="form-label">Финансирование</label>
        <select class="form-select" id="fundingOption">
          <option>Ищу только полное финансирование</option>
          <option>Готов платить</option>
          <option>Рассматриваю только бесплатное обучение</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="maxBudget" class="form-label">Макс. бюджет в год</label>
        <input type="number" class="form-control" id="maxBudget" placeholder="Например: 8000" />
      </div>
      <div class="mb-3">
        <label for="achievements" class="form-label">Ключевые достижения</label>
        <textarea class="form-control" id="achievements" rows="3" placeholder="Например: призер олимпиады по физике..."></textarea>
      </div>
      <button type="submit" class="find-university-btn">Найти университеты</button>
    </form>

    <div id="loadingSpinner" class="text-center mt-4" style="display: none;">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Загрузка...</span>
      </div>
    </div>

    <div id="results" class="mt-5 p-4 rounded shadow-sm" style="display: none;">
      <h3>Результаты подбора</h3>
      <p id="aiReasoning" class="text-light"></p>
      <ul id="universityList" class="list-group mt-3"></ul>
    </div>
  </div>
  
<script>
  document.getElementById("uniForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const educationLevel = document.getElementById("educationLevel").value;
    const gpa = document.getElementById("gpa").value;
    const languageTest = document.getElementById("languageTest").value;
    const aptitudeTest = document.getElementById("aptitudeTest").value;
    const major = document.getElementById("major").value;
    const region = document.getElementById("region").value;
    const fundingOption = document.getElementById("fundingOption").value;
    const maxBudget = document.getElementById("maxBudget").value;
    const achievements = document.getElementById("achievements").value;

    const prompt = `Найди университеты, подходящие под эти параметры:\n\n- Уровень образования: ${educationLevel}\n- GPA: ${gpa}\n- Языковой тест: ${languageTest}\n- SAT/ACT: ${aptitudeTest}\n- Специальность: ${major}\n- Регион: ${region}\n- Финансирование: ${fundingOption}\n- Бюджет: ${maxBudget}\n- Достижения: ${achievements}`;

    document.getElementById("loadingSpinner").style.display = "block";
    document.getElementById("results").style.display = "none";

    try {
      const API_BASE_URL = window.location.hostname === "localhost"
        ? "http://localhost:3000"
        : "https://majormatch.onrender.com";

      const response = await fetch(`${API_BASE_URL}/ask-gemini`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ prompt }),
      });

      const data = await response.json();

      const resultsContainer = document.getElementById("universityList");
      resultsContainer.innerHTML = "";

      const paragraphs = data.text.split(/\n{2,}/); // разбиваем ответ на части

      paragraphs.forEach((para) => {
        if (para.trim()) {
          const card = document.createElement("div");
          card.classList.add("uni-card");
          card.textContent = para.trim();
          resultsContainer.appendChild(card);
        }
      });

      document.getElementById("results").style.display = "block";
    } catch (error) {
      alert("Ошибка при получении ответа от сервера");
    } finally {
      document.getElementById("loadingSpinner").style.display = "none";
    }
  });
</script>
  <footer class="site-footer">
  <div class="footer-container">
    <div class="footer-block">
      <h5>О нас</h5>
      <p>MajorMatch — ваш навигатор в мире высшего образования.</p>
    </div>
    <div class="footer-block">
      <h5>Контакты</h5>
      <ul>
        <li>Email: <a href="mailto:majormatch.group@gmail.com">majormatch.group@gmail.com</a></li>
        <li>Telegram:
          <ul class="footer-social">
            <li><a href="https://t.me/handynb">@handynb</a></li>
            <li><a href="https://t.me/Ottttyy">@Ottttyy</a></li>
            <li><a href="https://t.me/Aiyyme">@Aiyyme</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <div class="footer-block">
      <h5>Правовая информация</h5>
      <a href="#">Политика конфиденциальности (в разработке)</a>
    </div>
  </div>
  <div class="footer-bottom">
    © 2025 MajorMatch. Все права защищены.
  </div>
</footer>

</body>
</html>